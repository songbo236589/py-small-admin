# ===================================================================
# RabbitMQ 配置文件
# ===================================================================
# 说明: 此文件用于 Docker 容器中的 RabbitMQ 服务
# ===================================================================

# ========================================
# 监听配置
# ========================================
# 监听所有接口
listeners.tcp.default = 5672

# ========================================
# 管理界面配置
# ========================================
# 启用管理插件
management.tcp.port = 15672

# 允许 guest 用户从远程访问（仅用于开发环境）
loopback_users.guest = false

# ========================================
# 内存与磁盘配置
# ========================================
# 内存阈值（相对可用内存）
vm_memory_high_watermark.relative = 0.4

# 磁盘空闲空间阈值
disk_free_limit.absolute = 1GB

# ========================================
# 连接配置
# ========================================
# 最大连接数
channel_max = 2048

# 连接心跳超时（秒）
# 默认: 60秒，对于耗时任务可能导致超时
# 增加到 600 秒（10分钟）以支持长时间运行的任务
heartbeat = 600

# Consumer 超时时间（毫秒）
# 默认值: 1800000 (30分钟)
# 设置为 604800000 (7天)，以支持大量延迟任务
# 注意：这是临时方案，长期应使用 eta 参数代替 countdown
consumer_timeout = 604800000

# ========================================
# 日志配置
# ========================================
# 日志级别
log.console.level = info

# 日志文件
log.file.level = info

# ========================================
# 集群配置（可选）
# ========================================
# 集群名称
# cluster_formation.peer_discovery_backend = rabbit_peer_discovery_classic_config
# cluster_formation.classic_config.nodes.1 = rabbit@node1
# cluster_formation.classic_config.nodes.2 = rabbit@node2
