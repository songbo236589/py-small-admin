# 错误码说明

本文档列出了所有 API 错误码。

## HTTP 状态码

| 状态码 | 说明 |
|--------|------|
| 200 | 成功 |
| 201 | 已创建 |
| 204 | 无内容 |
| 400 | 请求错误 |
| 401 | 未认证 |
| 403 | 禁止访问 |
| 404 | 未找到 |
| 500 | 服务器错误 |

## 业务错误码

### 通用错误

| 错误码 | 说明 | HTTP 状态码 |
|--------|------|------------|
| 1000 | 请求参数错误 | 400 |
| 1001 | 参数验证失败 | 400 |
| 1002 | 缺少必填参数 | 400 |
| 1003 | 参数类型错误 | 400 |

### 认证错误

| 错误码 | 说明 | HTTP 状态码 |
|--------|------|------------|
| 2001 | 用户名或密码错误 | 400 |
| 2002 | 验证码错误 | 400 |
| 2003 | 账号已被禁用 | 403 |
| 2004 | Token 无效 | 401 |
| 2005 | Token 已过期 | 401 |
| 2006 | Token 已撤销 | 401 |
| 2007 | Refresh Token 无效 | 401 |

### 资源错误

| 错误码 | 说明 | HTTP 状态码 |
|--------|------|------------|
| 3001 | 资源不存在 | 404 |
| 3002 | 资源已存在 | 400 |
| 3003 | 资源已被删除 | 400 |
| 3004 | 资源正在使用中 | 400 |

### 权限错误

| 错误码 | 说明 | HTTP 状态码 |
|--------|------|------------|
| 4001 | 无权限访问 | 403 |
| 4002 | Token 权限不足 | 403 |

### 系统错误

| 错误码 | 说明 | HTTP 状态码 |
|--------|------|------------|
| 5000 | 服务器内部错误 | 500 |
| 5001 | 数据库错误 | 500 |
| 5002 | Redis 错误 | 500 |
| 5003 | 文件上传失败 | 500 |
| 5004 | 外部服务错误 | 500 |

## 错误响应格式

```json
{
  "code": 1001,
  "message": "参数验证失败",
  "data": {
    "errors": [
      {
        "field": "username",
        "message": "用户名不能为空"
      }
    ]
  }
}
```

## 处理建议

### 前端处理

1. 根据错误码显示友好的错误信息
2. 401 错误时跳转登录页
3. 403 错误时显示权限不足
4. 404 错误时跳转 404 页面
5. 500 错误时显示服务器错误

### 后端处理

1. 记录详细的错误日志
2. 返回友好的错误信息
3. 不要暴露敏感信息
4. 提供错误追踪 ID
